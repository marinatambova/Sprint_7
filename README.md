Проект: Автоматизация тестирования API сервиса Яндекс Самокат
Описание проекта
В данном проекте проведена автоматизация тестирования API учебного сервиса Яндекс Самокат. Целью проекта является проверка корректной работы основных функций сервиса посредством написания автотестов.

Покрыты следующие ручки (эндпоинты) API:

Создание курьера (POST /api/v1/courier)
Авторизация курьера (POST /api/v1/courier/login)
Создание заказа (POST /api/v1/orders)
Получение списка заказов (GET /api/v1/orders)
Тесты были написаны с использованием библиотеки pytest и библиотеки requests для отправки HTTP-запросов. Для генерации отчетов о тестировании использовался Allure Framework.

Структура проекта

Sprint_7/
│
├── tests/
│   ├── __init__.py
│   ├── test_create_courier.py
│   ├── test_courier_login.py
│   ├── test_create_order.py
│   └── test_get_orders_list.py
│
├── utils.py
├── conftest.py
├── requirements.txt
├── README.md
├── pytest.ini
└── allure-report/  (папка с отчетом Allure, если требуется)
tests/ — папка с тестами для каждого эндпоинта.
utils.py — вспомогательные функции и методы.
conftest.py — файл с фикстурами для pytest.
requirements.txt — список зависимостей проекта.
pytest.ini — конфигурационный файл pytest с зарегистрированными метками (markers).
README.md — этот файл с описанием проекта.
allure-report/ — папка с отчетом Allure (необходимо добавить в репозиторий, если требуется по заданию).
Установка и настройка
Предварительные требования
Python 3.7 или выше.
Установленный Git для клонирования репозитория.
Установленный Allure Commandline для генерации отчетов (инструкции по установке ниже).
Шаги установки
Клонируйте репозиторий проекта:


git clone https://github.com/yourusername/Sprint_7.git
cd Sprint_7
Создайте и активируйте виртуальное окружение:

Windows:


python -m venv .venv
.venv\Scripts\activate
macOS/Linux:


python3 -m venv .venv
source .venv/bin/activate
Установите зависимости из requirements.txt:


pip install -r requirements.txt
Установите Allure Commandline для генерации отчетов:

Windows:

Скачайте файл allure-commandline.zip с официального сайта.
Разархивируйте файл в удобное место, например, C:\allure.
Добавьте путь C:\allure\bin в переменную окружения PATH.
macOS/Linux:

Установите Allure через brew (для macOS):


brew install allure
Или скачайте архив с официального сайта и добавьте путь к bin в PATH.

Запуск тестов
1. Запуск всех тестов

pytest
2. Запуск тестов с генерацией отчета Allure

pytest --alluredir=./allure-results
3. Генерация и просмотр отчета Allure
Генерация отчета:


allure generate ./allure-results -o ./allure-report --clean
Просмотр отчета:


allure open ./allure-report
Отчет откроется в браузере и вы сможете просмотреть результаты тестирования в удобном виде.

Описание тестов
1. Тесты для эндпоинта "Создание курьера"
Позитивные тесты:

Успешное создание курьера с корректными данными.
Негативные тесты:

Попытка создать курьера без обязательного поля login.
Попытка создать курьера без обязательного поля password.
Попытка создать курьера с уже существующим login.
2. Тесты для эндпоинта "Авторизация курьера"
Позитивные тесты:

Успешная авторизация курьера с корректными данными.
Негативные тесты:

Попытка авторизации без обязательного поля login.
Попытка авторизации без обязательного поля password.
Попытка авторизации с неверным паролем.
Попытка авторизации под несуществующим пользователем.
Известная проблема:

Ошибка 504 Gateway Timeout при отсутствии поля password

При попытке авторизоваться без поля password сервер возвращает код ошибки 504 Gateway Timeout. Это означает, что сервер не отвечает вовремя на запрос.

Решение:

Данный тест помечен как ожидаемо падающий с помощью pytest.xfail, так как проблема, вероятно, на стороне сервера.
3. Тесты для эндпоинта "Создание заказа"
Позитивные тесты:

Создание заказа, указывая один из цветов (BLACK или GREY).
Создание заказа, указывая оба цвета.
Создание заказа без указания цвета.
Параметризация:

Тесты на создание заказа с разными вариантами поля color выполнены с использованием параметризации pytest.
4. Тесты для эндпоинта "Получение списка заказов"
Позитивные тесты:

Успешное получение списка заказов.
Проверка структуры ответа и наличия необходимых полей.
Конфигурация pytest и метки (markers)
В файле pytest.ini зарегистрированы метки для запуска групп тестов:


[pytest]
markers =
    create_courier: тесты для эндпоинта создания курьера
    courier_login: тесты для эндпоинта авторизации курьера
    create_order: тесты для эндпоинта создания заказа
    get_orders_list: тесты для эндпоинта получения списка заказов
Запуск группы тестов по метке:

Например, чтобы запустить только тесты для создания курьера:


pytest -m create_courier
Фикстуры и вспомогательные функции
В файле conftest.py определены фикстуры pytest для подготовки и очистки тестовых данных:

new_courier — создаёт нового курьера перед тестом и удаляет после теста.
В файле utils.py содержатся вспомогательные функции:

generate_random_string(length=10) — генерирует случайную строку указанной длины.
BASE_URL — базовый URL для API сервиса.
Тестовые данные
Тесты используют случайно сгенерированные данные для обеспечения уникальности.
Очистка тестовых данных
Все созданные в процессе тестирования курьеры и заказы удаляются после выполнения тестов, чтобы не загрязнять базу данных.
Известные проблемы и их решение
Ошибка 504 Gateway Timeout при авторизации без поля password:

Проблема, вероятно, на стороне сервера.
Тест помечен как xfail.
Рекомендуется сообщить разработчикам о данной проблеме.
Требования
Python 3.7 или выше
pytest
requests
allure-pytest
pytest-ordering
Все необходимые зависимости устанавливаются из файла requirements.txt.

Контактная информация
Автор: Тамбова Мария
GitHub: myutambova
Заключение
Данный проект демонстрирует навыки автоматизации тестирования API с использованием фреймворка pytest и показывает умение работать с HTTP-запросами, обрабатывать ответы сервера и генерировать отчеты о тестировании с помощью Allure.